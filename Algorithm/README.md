# 系统方法部分

## Data-Preparing

数据准备：

通过层次地遍历[Wikipedia Software development](https://en.wikipedia.org/wiki/Category:Software_development)其下的各个子分类和子页面，本文获取了软件开发领域的各个知识条目，共有超过27000个知识条目。

为了为软件开发初学者构建有助于软件开发学习的GitHub学习和检索系统，需要选取与软件开发有着较为紧密关联的GitHub仓库。本文从获取到的Wikipedia软件开发领域知识条目连接到的GitHub仓库出发，结合用户为仓库标星的行为，选择了与Wikipedia软件开发领域有着直接或间接关系的GitHub仓库。

在获取的Wikipedia软件开发领域知识条目中，有部分包含开源代码的知识条目与GitHub仓库相关联，条目内容中包含指向GitHub仓库的链接。本文从Wikipedia页面的html源码中抽取指向GitHub仓库的链接，从而获取第一级与Wikipedia直接相连的GitHub仓库，共有2281个仓库。

仅仅与Wikipedia直接相连的2281个GitHub仓库显然不足以代表GitHub的仓库资源，也无法为软件开发初学者构建起一个GitHub的学习和检索系统。本文从这2281个GitHub仓库出发，将仓库范围扩展到GitHub上与软件开发相关的，比较具有代表性的仓库。具体做法如下：
1）通过GitHub REST API获取在GitHub上对star了这2281个仓库的所有用户。由此，本文获得了全部2281个仓库的220余万名标星用户。平均每个仓库有将近1000名标星用户，可知Wikipedia直接链接到的这些GitHub仓库流行度较高。这些用户对star了Wikipedia软件开发领域链接到的GitHub仓库，说明他们对软件开发有着一定的兴趣，他们的其他star仓库也可能与软件开发相关。
2）在每个仓库的stargazer中，随机选取一名用户作为该仓库stargazer的代表，并爬取他的star仓库列表。由此本文获得了超过75万个GitHub仓库。
3）目前获取的超过75万个GitHub仓库数量庞大，但在质量上较为参差不齐。为了提高GitHub学习检索系统的仓库质量，本文使用仓库star数对仓库进行筛选，只留下star数不少于150的仓库，共有超过18万个仓库。
至此，本文成功获得了超过18万个与Wikipedia软件开发领域条目直接或间接相关的且认可度较高的GitHub仓库，以此作为本文将要实现的GitHub层次化学习和检索系统的基础。

本文通过GitHub REST API获取了每个仓库的star数、仓库描述、Readme文件、topic。

由于GitHub topic由用户自主添加，没有统一的规范，因此存在许多同义但形式上略有不同的topics，如“c++”与“cpp”。本文使用Stack Overflow提供的同义词集合 将同义的topic归为同一类，便于后续分析处理。

以上数据准备的相关代码位于Data-Preparing文件夹中。

## HierGithub

构建Github topic层次结构：

### Hierarchical-Clustering

层次聚类：

本文使用仓库的topic作为仓库的主要类别特征代表，对GitHub topic进行层次聚类，从而抽取出GitHub内部以topic簇为代表的层级结构。本文基于topic之间的共现关系，使用Leiden社区发现（community detection）算法对topic进行层次聚类。

本文获取了相关仓库的topic。在183805个仓库中，有94617个仓库具有topic。利用这些具有topic的仓库的信息，本文使用共现关系（topic对在同一个仓库中共现的次数）和Leiden算法对topic进行层次聚类，包括如下步骤：

1. 为了减少单个仓库对整体分析的影响，更好地体现topic的整体结构，对topic和topic对进行筛选，去除总出现次数不超过3的topic，对于仅在一个仓库中共同出现过的topic对，不计入它们的联系，即将它们的共现次数计为0，最后去除所有孤立的无共现topic的topic，得到17931个topic。
2. 统计所有topic对的共现次数（对于两个topic t_a和t_b，它们的共现次数为同时含有t_a和t_b的仓库数量），构建topic的共现矩阵。
3. 根据共现矩阵，使用python工具包NetworkX 建立topic共现关系图。
4. 在topic共现关系图上调用python工具包leidenalg 的find_partition函数，该函数使用Leiden算法进行社区发现。
5. 对于前一步所得的社区，在其上继续应用Leiden算法，划分出新的社区。
6. 重复步骤5，直到所得的社区均不可被Leiden算法再分，完成topic的层次聚类过程。
本文构建出的topic层次聚类中共有4450个底层topic社区，从顶层社区到低层社区的最长路径为8。本文将一个topic社区称为一个topic簇。对于网络中的一个节点，度中心性是它与其他节点的直接联系总数，对于带权图来说，节点的度中心性是节点连边的权重之和。度中心性常用于衡量网络中节点的重要性，度中心性越大的节点在网络中越重要。本文使用每个topic簇里度中心性最大的topic作为该topic簇的代表topic。对于一个GitHub仓库，若其含有某个底层topic簇内的一个topic，则称该仓库与该topic簇具有联系。
